<div class="main-content">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-header">
        <strong>Add</strong> Product
      </div>
      <div class="card-body card-block">
        <%= simple_form_for @product, url: update_product_path(product_id: @product.id), :html => {:multipart => true }, method: :put do |f| %>
          <%= f.error_notification %>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="text-input" class=" form-control-label">Product Name</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :name, class: "form-control", id: "text-input", label: false, required: true %>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="text-input" class=" form-control-label">Description</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :description, class: "form-control", id: "text-input", label: false, required: true %>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="text-input" class=" form-control-label">Sku</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :sku, class: "form-control", id: "text-input", label: false %>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="text-input" class=" form-control-label">Price</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :price, class: "form-control", id: "text-input", label: false, required: true %>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="text-input" class=" form-control-label">Article number</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :article_number, class: "form-control", id: "text-input", label: false %>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="text-input" class=" form-control-label">Supplier URL</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :supplier_url, class: "form-control", id: "text-input", label: false %>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="text-input" class=" form-control-label">Vendor store product number</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :vendor_store_product_number, class: "form-control", id: "text-input", label: false, required: true %>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="text-input" class=" form-control-label">Weight</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :weight, class: "form-control", id: "text-input", label: false %>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="text-input" class=" form-control-label">Additional Product Information</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :additional_information, class: "form-control", id: "text-input", label: false %>
            </div>
          </div>
          <%= f.hidden_field :store_id, value: current_user.store.id, class: "form-control", id: "text-input" %>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="select" class=" form-control-label">Select Brand</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :product_brand, collection: Brand.all.map { |s| [("#{s.name}"), s.id] }, class: "form-control", label: false, selected: @product.brand.id %>
              <p style="color: red" id="brand_error">Please select brands to proceed</p>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="select" class=" form-control-label">Select Category</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :product_category, collection: Category.all.map { |s| [("#{s.name}"), s.id] }, class: "form-control", label: false, selected: @product.category.id %>
              <p style="color: red" id="category_error">Please select category to proceed</p>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="select" class=" form-control-label">Select Sub Category</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :product_sub_category, collection: SubCategory.all.map { |s| [("#{s.name}"), s.id] }, class: "form-control", label: false, selected: @product.sub_category.id %>
              <p style="color: red" id="sub_category_error">Please select sub category to proceed</p>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="select" class=" form-control-label">Select Product Type</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :product_group, collection: ProductType.all.map { |s| [("#{s.name}"), s.id] }, class: "form-control", label: false, selected: @product.product_type.id %>
              <p style="color: red" id="product_type_error">Please select product type to proceed</p>
            </div>
          </div>

          <div class="row form-group">
            <div class="col col-md-3">
              <label for="select" class=" form-control-label">Select Color</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :color_ids, as: :check_boxes, collection: Color.all.map { |c| [c.name, c.id] }, wrapper: :vertical_collection_inline, label: false %>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="select" class=" form-control-label">Select Size</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :size_ids, as: :check_boxes, collection: Size.all.map { |c| [c.name, c.id] }, wrapper: :vertical_collection_inline, label: false %>

            </div>
          </div>

          <div id="shipments">
            <%= f.simple_fields_for :product_shipments do |shipment| %>

              <%= render 'product_shipment_fields', f: shipment %>
            <% end %>
            <div class="links">
              <%= link_to_add_association 'add shipment', f, :product_shipments %>
            </div>
          </div>
          <div id="specifications">
            <%= f.simple_fields_for :product_specifications do |shipment| %>

              <%= render 'product_specification_fields', f: shipment %>
            <% end %>
            <div class="links">
              <%= link_to_add_association 'add specification', f, :product_specifications %>
            </div>
          </div>
          <br>
          <br>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="select" class=" form-control-label">Sale</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :sale, as: :radio_buttons, label: false, required: true %>

            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="text-input" class=" form-control-label">Percentage on Sale</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :sale_off_percent, class: "form-control", id: "text-input", label: false %>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="select" class=" form-control-label">Active</label>
            </div>
            <div class="col-12 col-md-9">
              <%= f.input :active, as: :radio_buttons, label: false, required: true %>
            </div>
          </div>
          <div class="row form-group">
            <div class="col col-md-3">
              <label for="file-input" class=" form-control-label">File input</label>
            </div>
            <div class="col-12 col-md-9">
              <%= file_field_tag "images[]", type: :file, multiple: true %>
            </div>
          </div>
          <%= f.submit 'Submit', class: "btn btn-primary btn-sm", id: "submit_product" %>
        <% end %>
      </div>
    </div>
    <div class="Row">
      <% @product.product_images.each do |image| %>
        <div class="Column"><img src="<%= image.image.url(:medium) if image.image.present?%>" alt=""></div>
      <% end %>
    </div>
  </div>
</div>
<style>
  #brand_error, #category_error, #sub_category_error, #product_type_error{
    display: none;
  }
  .Row
  {
    /*display: table;*/
    width: 100%; /*Optional*/
    table-layout: fixed; /*Optional*/
    border-spacing: 10px; /*Optional*/
  }
  .Column
  {
    display: table-cell;
  }
</style>
<script>
    $('#product_product_brand').chosen({
        allow_single_deselect: true,
        no_results_text: 'No results matched',
        width: '200px'
    });
    $('#product_product_category').chosen({
        allow_single_deselect: true,
        no_results_text: 'No results matched',
        width: '200px'
    });
    $('#product_product_sub_category').chosen({
        allow_single_deselect: true,
        no_results_text: 'No results matched',
        width: '200px'
    });
    $('#product_product_group').chosen({
        allow_single_deselect: true,
        no_results_text: 'No results matched',
        width: '200px'
    });
    $("#submit_product").click(function(e){
        if($('#product_product_brand').val() == 0){
            $("#brand_error").show();
            e.preventDefault()
        }
        if($('#product_product_category').val() == 0){
            $("#category_error").show();
            e.preventDefault()
        }
        if($('#product_product_sub_category').val() == 0){
            $("#sub_category_error").show();
            e.preventDefault()
        }
        if($('#product_product_group').val() == 0){
            $("#product_type_error").show();
            e.preventDefault()
        }
        if ($('#product_product_brand').val() > 0 && $('#product_product_category').val() > 0 && $('#product_product_sub_category').val() > 0 && $('#product_product_group').val() > 0){
            $("#brand_error").hide();
            $("#category_error").hide();
            $("#sub_category_error").hide();
            $("#product_type_error").hide();
            $("#submit_product").click();
        }
    });
</script>